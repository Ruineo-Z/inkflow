# è„šæœ¬ä½¿ç”¨è¯´æ˜

## ç« èŠ‚ç”Ÿæˆæµ‹è¯•è„šæœ¬

`test_chapter_generation.py` æ˜¯ä¸€ä¸ªç”¨äºæµ‹è¯•ç« èŠ‚ç”ŸæˆAPIçš„å‘½ä»¤è¡Œå·¥å…·ï¼Œæ”¯æŒæµå¼è¾“å‡ºå±•ç¤ºã€‚

### åŠŸèƒ½ç‰¹ç‚¹

- ğŸŒŠ **æµå¼è¾“å‡º**: å®æ—¶å±•ç¤ºç”Ÿæˆè¿‡ç¨‹
- ğŸ¨ **å¯Œæ–‡æœ¬æ˜¾ç¤º**: ä½¿ç”¨ Rich åº“æä¾›ç¾è§‚çš„ç»ˆç«¯è¾“å‡º
- ğŸ“Š **è¿›åº¦æŒ‡ç¤º**: æ˜¾ç¤ºç”ŸæˆçŠ¶æ€å’Œè¿›åº¦
- ğŸ”„ **é”™è¯¯å¤„ç†**: å®Œå–„çš„é”™è¯¯å¤„ç†å’Œæç¤º

### å®‰è£…ä¾èµ–

```bash
uv add httpx click rich
```

### ä½¿ç”¨æ–¹æ³•

#### 1. ç”Ÿæˆç¬¬ä¸€ç« 

```bash
python scripts/test_chapter_generation.py first <novel_id>
```

ç¤ºä¾‹ï¼š
```bash
python scripts/test_chapter_generation.py first 1
```

#### 2. ç”Ÿæˆåç»­ç« èŠ‚

```bash
python scripts/test_chapter_generation.py next <novel_id> <option_id>
```

ç¤ºä¾‹ï¼š
```bash
python scripts/test_chapter_generation.py next 1 5
```

#### 3. æŒ‡å®šæœåŠ¡å™¨åœ°å€å’Œè®¤è¯

```bash
python scripts/test_chapter_generation.py --base-url http://localhost:8001 --token your_token first 1
```

#### 4. æŸ¥çœ‹å¸®åŠ©

```bash
python scripts/test_chapter_generation.py --help
python scripts/test_chapter_generation.py first --help
python scripts/test_chapter_generation.py next --help
```

### è¾“å‡ºç¤ºä¾‹

è„šæœ¬ä¼šæ˜¾ç¤ºï¼š

1. **è¿æ¥çŠ¶æ€**: æ˜¾ç¤ºè¿æ¥è¿›åº¦å’ŒçŠ¶æ€
2. **ç« èŠ‚æ‘˜è¦**: ç”Ÿæˆçš„ç« èŠ‚æ¦‚è¦ä¿¡æ¯
3. **å®æ—¶å†…å®¹**: æµå¼æ˜¾ç¤ºç”Ÿæˆçš„æ–‡æœ¬å†…å®¹
4. **ç« èŠ‚é€‰é¡¹**: æ˜¾ç¤ºå¯é€‰çš„ä¸‹ä¸€æ­¥é€‰é¡¹
5. **å®Œæ•´ç»“æœ**: æœ€ç»ˆçš„å®Œæ•´ç« èŠ‚å†…å®¹

### æ³¨æ„äº‹é¡¹

- ç¡®ä¿ FastAPI æœåŠ¡å™¨å·²å¯åŠ¨ï¼ˆé»˜è®¤ç«¯å£ 8001ï¼‰
- å¦‚æœéœ€è¦è®¤è¯ï¼Œè¯·æä¾›æœ‰æ•ˆçš„ token
- ç”Ÿæˆè¿‡ç¨‹å¯èƒ½éœ€è¦è¾ƒé•¿æ—¶é—´ï¼Œè¯·è€å¿ƒç­‰å¾…
- å¦‚æœé‡åˆ°ç½‘ç»œé—®é¢˜ï¼Œè¯·æ£€æŸ¥æœåŠ¡å™¨çŠ¶æ€

### æ•…éšœæ’é™¤

1. **è¿æ¥å¤±è´¥**: æ£€æŸ¥æœåŠ¡å™¨æ˜¯å¦å¯åŠ¨ï¼Œç«¯å£æ˜¯å¦æ­£ç¡®
2. **è®¤è¯é”™è¯¯**: æ£€æŸ¥ token æ˜¯å¦æœ‰æ•ˆ
3. **è¶…æ—¶é”™è¯¯**: ç”Ÿæˆæ—¶é—´è¾ƒé•¿ï¼Œå¯ä»¥ç­‰å¾…æˆ–é‡è¯•
4. **JSON è§£æé”™è¯¯**: å¯èƒ½æ˜¯æœåŠ¡å™¨è¿”å›äº†éæ ‡å‡†æ ¼å¼çš„æ•°æ®